<!DOCTYPE html>
<html>
  <head>
    <title>ChronoCraft</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" href="/mycss/mylogin.css" />
    <link
      rel="shortcut icon"
      type="image/x-icon"
      href="/images/logo/chrono.jpg"
    />
  </head>

  <body>
    <form
      id="form"
      action="/reset-password"
      method="POST"
      class="container text-center"
      onsubmit="return validateForm()"
    >
      <img
        class="mt-1 mb-4"
        src="/images/myimages/chronocraft logo.png"
        alt=""
        style="width: 90%; height: 50%; padding-left: 8%"
      />
      <input type="hidden" name="token" value="<%= token %>" />
      <p style="color: green; text-align: center"><%= successMsg %></p>
      <div class="error-message mt-3" id="error-message"></div>
      <div class="input-control">
        <% if(successMsg) {%>
        <a href="/login">Login</a>
        <% }else { %>
        <label for="password">Enter your new Password</label>
        <input type="text" name="password" id="password" />
        <div class="error"></div>
      </div>
      <div class="mt-3">
        <button class="btn btn-primary" type="submit">Reset Password</button>
      </div>
      <% } %>
    </form>

    <script>
      function validateForm() {
        const password = document.getElementById("password").value;
        const errorMessage = document.getElementById("error-message");

        if (password.length < 6) {
          errorMessage.textContent =
            "Password must be at least 6 characters long.";
          return false;
        } else {
          errorMessage.textContent = "";
          return true;
        }
      }
    </script>

    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-wEmeIV1mKuiNp8j/8HkP9KFLiw/gSY2DLDewR8wkIo3vJFtNkCajF17HCOc5lKND"
      crossorigin="anonymous"
    ></script>
  </body>
</html>
